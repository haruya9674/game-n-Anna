<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Story 3 â€“ The First Shadow</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:system-ui,sans-serif;
  padding:20px;
  padding-bottom:160px;
  background:linear-gradient(180deg,#fff6fb,#f0fbff);
  max-width:620px;
  margin:auto;
}

h1{text-align:center;margin-bottom:6px;}
.sub{text-align:center;font-size:14px;color:#666;margin-bottom:20px;}

.story{
  background:white;
  padding:18px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
  font-size:18px;
  line-height:1.8;
}

.word{cursor:pointer;border-radius:6px;}
.word:active{background:#ffe4f1;}

.card{
  margin-top:20px;
  background:#ffffff;
  padding:16px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
}

.label{font-size:13px;color:#666;margin-top:10px;}
.text,.hiragana{font-size:18px;margin-top:4px;}
.hiragana{cursor:pointer;}

input{
  width:100%;
  padding:10px;
  font-size:16px;
  border-radius:12px;
  border:1px solid #ccc;
  margin-top:6px;
}

.controls{text-align:center;margin-top:20px;}

button,a{
  display:inline-block;
  margin:6px;
  padding:12px 18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  background:white;
  text-decoration:none;
  color:#333;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
}
</style>
</head>

<body>

<a href="index.html">â† Back to Menu</a>

<h1>ğŸ“– Story 3</h1>
<div class="sub">The First Shadow</div>

<div class="story" id="story">
The forest grew quieter as the child walked deeper inside.
The glowing stone softly lit the path ahead.
Suddenly, a long shadow moved between the trees.
The child stopped and listened very carefully.
A pair of red eyes slowly appeared in the darkness.
The childâ€™s heart beat fast, but fear did not win.
The glowing stone shined brighter in response.
The shadow stepped back, as if afraid of the light.
The child realized the stone had a hidden power.
This was only the first shadow of many to come.
</div>

<div class="controls">
  <button onclick="readAll()">ğŸ”Š Read All</button>
  <a href="story2.html">â† Previous Story</a>
  <a href="story4.html">Next Story â†’</a>
</div>

<div class="card">
  <div class="label">ğŸ”¤ Word Checker</div>
  <input id="miniEng" placeholder="Tap a word or typeâ€¦" oninput="miniProcess()">

  <div class="label">Japanese</div>
  <div class="text" id="miniJP">â€”</div>

  <div class="label">Reading (Hiragana)</div>
  <div class="hiragana" id="miniHira" onclick="speakJP(miniHira.innerText)">â€”</div>

  <button onclick="speakEN()">ğŸ”Š English</button>
  <button onclick="speakJP(miniJP.innerText)">ğŸ”Š æ—¥æœ¬èª</button>
</div>

<script>
const dict={
the:{jp:"ãã®",hira:"ãã®"},
a:{jp:"ã²ã¨ã¤ã®",hira:"ã²ã¨ã¤ã®"},
as:{jp:"ã€œã®ã¨ã",hira:"ã¨ã"},
of:{jp:"ã€œã®",hira:"ã®"},
in:{jp:"ã€œã®ä¸­ã§",hira:"ãªã‹ã§"},
was:{jp:"ã€œã ã£ãŸ",hira:"ã ã£ãŸ"},
did:{jp:"ã—ãŸ",hira:"ã—ãŸ"},
not:{jp:"ã€œã—ãªã„",hira:"ã—ãªã„"},
this:{jp:"ã“ã®",hira:"ã“ã®"},
to:{jp:"ã€œã¸",hira:"ã¸"},
only:{jp:"ãŸã ã€œã ã‘",hira:"ã ã‘"},
very:{jp:"ã¨ã¦ã‚‚",hira:"ã¨ã¦ã‚‚"},
if:{jp:"ã‚‚ã—",hira:"ã‚‚ã—"},
had:{jp:"æŒã£ã¦ã„ãŸ",hira:"ã‚‚ã£ã¦ã„ãŸ"},

forest:{jp:"æ£®",hira:"ã‚‚ã‚Š"},
grew:{jp:"ã€œã«ãªã£ãŸ",hira:"ãªã£ãŸ"},
quieter:{jp:"ã‚ˆã‚Šé™ã‹ã«",hira:"ã‚ˆã‚Šã—ãšã‹ã«"},
child:{jp:"å­ã©ã‚‚",hira:"ã“ã©ã‚‚"},
walked:{jp:"æ­©ã„ãŸ",hira:"ã‚ã‚‹ã„ãŸ"},
deeper:{jp:"ã‚ˆã‚Šæ·±ã",hira:"ã‚ˆã‚Šãµã‹ã"},
inside:{jp:"ä¸­ã«",hira:"ãªã‹ã«"},
glowing:{jp:"å…‰ã‚‹",hira:"ã²ã‹ã‚‹"},
stone:{jp:"çŸ³",hira:"ã„ã—"},
softly:{jp:"ã‚„ã•ã—ã",hira:"ã‚„ã•ã—ã"},
lit:{jp:"ç…§ã‚‰ã—ãŸ",hira:"ã¦ã‚‰ã—ãŸ"},
path:{jp:"é“",hira:"ã¿ã¡"},
ahead:{jp:"å‰æ–¹ã«",hira:"ãœã‚“ã½ã†ã«"},
suddenly:{jp:"çªç„¶",hira:"ã¨ã¤ãœã‚“"},
long:{jp:"é•·ã„",hira:"ãªãŒã„"},
shadow:{jp:"å½±",hira:"ã‹ã’"},
moved:{jp:"å‹•ã„ãŸ",hira:"ã†ã”ã„ãŸ"},
between:{jp:"ã€œã®é–“ã«",hira:"ã‚ã„ã ã«"},
trees:{jp:"æœ¨ã€…",hira:"ãã"},
stopped:{jp:"ç«‹ã¡æ­¢ã¾ã£ãŸ",hira:"ãŸã¡ã©ã¾ã£ãŸ"},
listened:{jp:"èã„ãŸ",hira:"ãã„ãŸ"},
carefully:{jp:"æ³¨æ„æ·±ã",hira:"ã¡ã‚…ã†ã„ã¶ã‹ã"},
pair:{jp:"ä¸€çµ„",hira:"ã²ã¨ãã¿"},
red:{jp:"èµ¤ã„",hira:"ã‚ã‹ã„"},
eyes:{jp:"ç›®",hira:"ã‚"},
slowly:{jp:"ã‚†ã£ãã‚Š",hira:"ã‚†ã£ãã‚Š"},
appeared:{jp:"ç¾ã‚ŒãŸ",hira:"ã‚ã‚‰ã‚ã‚ŒãŸ"},
darkness:{jp:"æš—é—‡",hira:"ãã‚‰ã‚„ã¿"},
heart:{jp:"å¿ƒ",hira:"ã“ã“ã‚"},
beat:{jp:"é¼“å‹•ã—ãŸ",hira:"ã“ã©ã†ã—ãŸ"},
fast:{jp:"é€Ÿã",hira:"ã¯ã‚„ã"},
fear:{jp:"æã‚Œ",hira:"ãŠãã‚Œ"},
win:{jp:"å‹ã¤",hira:"ã‹ã¤"},
shined:{jp:"è¼ã„ãŸ",hira:"ã‹ãŒã‚„ã„ãŸ"},
brighter:{jp:"ã‚ˆã‚Šæ˜ã‚‹ã",hira:"ã‚ˆã‚Šã‚ã‹ã‚‹ã"},
response:{jp:"åå¿œ",hira:"ã¯ã‚“ã®ã†"},
stepped:{jp:"ä¸€æ­©ä¸‹ãŒã£ãŸ",hira:"ã„ã£ã½ã•ãŒã£ãŸ"},
back:{jp:"å¾Œã‚ã¸",hira:"ã†ã—ã‚ã¸"},
afraid:{jp:"æ€–ãŒã£ã¦",hira:"ã“ã‚ãŒã£ã¦"},
light:{jp:"å…‰",hira:"ã²ã‹ã‚Š"},
realized:{jp:"æ°—ã¥ã„ãŸ",hira:"ãã¥ã„ãŸ"},
hidden:{jp:"éš ã•ã‚ŒãŸ",hira:"ã‹ãã•ã‚ŒãŸ"},
power:{jp:"åŠ›",hira:"ã¡ã‹ã‚‰"},
first:{jp:"æœ€åˆã®",hira:"ã•ã„ã—ã‚‡ã®"},
many:{jp:"å¤šãã®",hira:"ãŠãŠãã®"},
come:{jp:"ã‚„ã£ã¦æ¥ã‚‹",hira:"ã‚„ã£ã¦ãã‚‹"}
};

const storyEl=document.getElementById("story");
const originalText=storyEl.innerText;

storyEl.innerHTML=originalText.split(/(\s+)/).map(w=>{
  if(/\s+/.test(w)) return w;
  const clean=w.toLowerCase().replace(/[^a-z]/g,"");
  return `<span class="word" onclick="selectWord('${clean}')">${w}</span>`;
}).join("");

function selectWord(w){
  miniEng.value=w;
  miniProcess();
  speakEN();
}

function miniProcess(){
  const w=miniEng.value.toLowerCase().trim();
  if(dict[w]){
    miniJP.innerText=dict[w].jp;
    miniHira.innerText=dict[w].hira;
  }else{
    miniJP.innerText="â€”";
    miniHira.innerText="â€”";
  }
}

function gentleEN(text){
  const u=new SpeechSynthesisUtterance(text);
  u.lang="en-US";
  u.rate=0.5;
  u.pitch=1.3;
  const voices=speechSynthesis.getVoices();
  const soft=voices.find(v=>v.lang.startsWith("en") && v.name.includes("Female"));
  if(soft) u.voice=soft;
  return u;
}

function speakEN(){
  if(!miniEng.value) return;
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(miniEng.value));
}

function speakJP(t){
  if(t==="â€”") return;
  const u=new SpeechSynthesisUtterance(t);
  u.lang="ja-JP";
  u.rate=0.5;
  u.pitch=1.2;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function readAll(){
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(originalText));
}
</script>

</body>
</html>
