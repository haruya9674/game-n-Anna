<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Story 6 â€“ The Shadow Appears</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:system-ui,sans-serif;
  padding:20px;
  padding-bottom:160px;
  background:linear-gradient(180deg,#fff6fb,#f0fbff);
  max-width:620px;
  margin:auto;
}

h1{text-align:center;margin-bottom:6px;}
.sub{text-align:center;font-size:14px;color:#666;margin-bottom:20px;}

.story{
  background:white;
  padding:18px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
  font-size:18px;
  line-height:1.8;
}

.word{
  cursor:pointer;
  border-radius:6px;
}

.word:active{
  background:#ffe4f1;
}

/* ===== Dictionary ===== */
.card{
  margin-top:20px;
  background:#ffffff;
  padding:16px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
}

.label{font-size:13px;color:#666;margin-top:10px;}
.text,.hiragana{font-size:18px;margin-top:4px;}
.hiragana{cursor:pointer;}

input{
  width:100%;
  padding:10px;
  font-size:16px;
  border-radius:12px;
  border:1px solid #ccc;
  margin-top:6px;
}

.controls{
  text-align:center;
  margin-top:20px;
}

button,a{
  display:inline-block;
  margin:6px;
  padding:12px 18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  background:white;
  text-decoration:none;
  color:#333;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
}
</style>
</head>

<body>

<a href="index.html">â† Back to Menu</a>

<h1>ğŸ“– Story 6</h1>
<div class="sub">The Shadow Appears</div>

<div class="story" id="story">
The air suddenly became cold and quiet.
The forest sounds slowly faded away.
A dark shadow appeared between the trees.
It moved without making any sound.
The childâ€™s heart began to beat faster.
The glowing stone trembled softly in the childâ€™s hand.
The shadow stopped and slowly turned.
Two faint eyes shined in the darkness.
The child stood still, trying not to breathe.
This was the first true enemy.
</div>

<div class="controls">
  <button onclick="readAll()">ğŸ”Š Read All</button>
  <a href="story5.html">â† Previous Story</a>
  <a href="story7.html">Next Story â†’</a>
</div>

<div class="card">
  <div class="label">ğŸ”¤ Word Checker</div>
  <input id="miniEng" placeholder="Tap a word or typeâ€¦" oninput="miniProcess()">

  <div class="label">Japanese</div>
  <div class="text" id="miniJP">â€”</div>

  <div class="label">Reading (Hiragana)</div>
  <div class="hiragana" id="miniHira" onclick="speakJP(miniHira.innerText)">â€”</div>

  <button onclick="speakEN()">ğŸ”Š English</button>
  <button onclick="speakJP(miniJP.innerText)">ğŸ”Š æ—¥æœ¬èª</button>
</div>

<script>
/* ===== Dictionary (Story6 å…¨å˜èªå¯¾å¿œ) ===== */
const dict={
the:{jp:"ãã®",hira:"ãã®"},
air:{jp:"ç©ºæ°—",hira:"ãã†ã"},
suddenly:{jp:"çªç„¶",hira:"ã¨ã¤ãœã‚“"},
became:{jp:"ã€œã«ãªã£ãŸ",hira:"ãªã£ãŸ"},
cold:{jp:"å†·ãŸã„",hira:"ã¤ã‚ãŸã„"},
and:{jp:"ãã—ã¦",hira:"ãã—ã¦"},
quiet:{jp:"é™ã‹ãª",hira:"ã—ãšã‹ãª"},
forest:{jp:"æ£®",hira:"ã‚‚ã‚Š"},
sounds:{jp:"éŸ³",hira:"ãŠã¨"},
slowly:{jp:"ã‚†ã£ãã‚Š",hira:"ã‚†ã£ãã‚Š"},
faded:{jp:"æ¶ˆãˆã¦ã„ã£ãŸ",hira:"ããˆã¦ã„ã£ãŸ"},
away:{jp:"æ¶ˆãˆã¦",hira:"ããˆã¦"},
a:{jp:"ä¸€ã¤ã®",hira:"ã²ã¨ã¤ã®"},
dark:{jp:"æš—ã„",hira:"ãã‚‰ã„"},
shadow:{jp:"å½±",hira:"ã‹ã’"},
appeared:{jp:"ç¾ã‚ŒãŸ",hira:"ã‚ã‚‰ã‚ã‚ŒãŸ"},
between:{jp:"ã€œã®é–“ã«",hira:"ã‚ã„ã ã«"},
trees:{jp:"æœ¨ã€…",hira:"ãã"},
it:{jp:"ãã‚Œã¯",hira:"ãã‚Œã¯"},
moved:{jp:"å‹•ã„ãŸ",hira:"ã†ã”ã„ãŸ"},
without:{jp:"ã€œãªã—ã§",hira:"ãªã—ã§"},
making:{jp:"ç«‹ã¦ã‚‹ã“ã¨",hira:"ãŸã¦ã‚‹ã“ã¨"},
any:{jp:"ã©ã‚“ãªã€œã‚‚",hira:"ã©ã‚“ãªã€œã‚‚"},
sound:{jp:"éŸ³",hira:"ãŠã¨"},
child:{jp:"å­ã©ã‚‚",hira:"ã“ã©ã‚‚"},
heart:{jp:"å¿ƒè‡“",hira:"ã—ã‚“ãã†"},
began:{jp:"å§‹ã‚ãŸ",hira:"ã¯ã˜ã‚ãŸ"},
to:{jp:"ã€œã™ã‚‹ã“ã¨",hira:"ã™ã‚‹ã“ã¨"},
beat:{jp:"é¼“å‹•ã™ã‚‹",hira:"ã“ã©ã†ã™ã‚‹"},
faster:{jp:"ã‚ˆã‚Šé€Ÿã",hira:"ã‚ˆã‚Šã¯ã‚„ã"},
glowing:{jp:"å…‰ã‚‹",hira:"ã²ã‹ã‚‹"},
stone:{jp:"çŸ³",hira:"ã„ã—"},
trembled:{jp:"éœ‡ãˆãŸ",hira:"ãµã‚‹ãˆãŸ"},
softly:{jp:"é™ã‹ã«",hira:"ã—ãšã‹ã«"},
in:{jp:"ã€œã®ä¸­ã§",hira:"ã®ãªã‹ã§"},
hand:{jp:"æ‰‹",hira:"ã¦"},
stopped:{jp:"æ­¢ã¾ã£ãŸ",hira:"ã¨ã¾ã£ãŸ"},
turned:{jp:"æŒ¯ã‚Šå‘ã„ãŸ",hira:"ãµã‚Šã‚€ã„ãŸ"},
two:{jp:"äºŒã¤ã®",hira:"ãµãŸã¤ã®"},
faint:{jp:"ã‹ã™ã‹ãª",hira:"ã‹ã™ã‹ãª"},
eyes:{jp:"ç›®",hira:"ã‚"},
shined:{jp:"å…‰ã£ãŸ",hira:"ã²ã‹ã£ãŸ"},
darkness:{jp:"æš—é—‡",hira:"ãã‚‰ã‚„ã¿"},
stood:{jp:"ç«‹ã£ãŸ",hira:"ãŸã£ãŸ"},
still:{jp:"å‹•ã‹ãšã«",hira:"ã†ã”ã‹ãšã«"},
trying:{jp:"è©¦ã¿ã¦",hira:"ã“ã“ã‚ã¿ã¦"},
not:{jp:"ã€œã—ãªã„",hira:"ã—ãªã„"},
breathe:{jp:"æ¯ã‚’ã™ã‚‹",hira:"ã„ãã‚’ã™ã‚‹"},
this:{jp:"ã“ã‚Œã¯",hira:"ã“ã‚Œã¯"},
was:{jp:"ã€œã ã£ãŸ",hira:"ã ã£ãŸ"},
first:{jp:"æœ€åˆã®",hira:"ã•ã„ã—ã‚‡ã®"},
true:{jp:"æœ¬å½“ã®",hira:"ã»ã‚“ã¨ã†ã®"},
enemy:{jp:"æ•µ",hira:"ã¦ã"}
};

/* ===== Word Tap ===== */
const storyEl=document.getElementById("story");
const originalText=storyEl.innerText;

storyEl.innerHTML=originalText.split(/(\s+)/).map(w=>{
  if(/\s+/.test(w)) return w;
  const clean=w.toLowerCase().replace(/[^a-z]/g,"");
  return `<span class="word" onclick="selectWord('${clean}')">${w}</span>`;
}).join("");

function selectWord(w){
  miniEng.value=w;
  miniProcess();
  speakEN();
}

/* ===== Dictionary ===== */
function miniProcess(){
  const w=miniEng.value.toLowerCase().trim();
  if(dict[w]){
    miniJP.innerText=dict[w].jp;
    miniHira.innerText=dict[w].hira;
  }else{
    miniJP.innerText="â€”";
    miniHira.innerText="â€”";
  }
}

/* ===== Speech ===== */
function gentleEN(text){
  const u=new SpeechSynthesisUtterance(text);
  u.lang="en-US";
  u.rate=0.5;
  u.pitch=1.3;
  const v=speechSynthesis.getVoices().find(v=>v.lang.startsWith("en")&&v.name.includes("Female"));
  if(v) u.voice=v;
  return u;
}

function speakEN(){
  if(!miniEng.value) return;
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(miniEng.value));
}

function speakJP(t){
  if(t==="â€”") return;
  const u=new SpeechSynthesisUtterance(t);
  u.lang="ja-JP";
  u.rate=0.5;
  u.pitch=1.2;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function readAll(){
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(originalText));
}
</script>

</body>
</html>
