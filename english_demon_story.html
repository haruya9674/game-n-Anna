<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Story 1 â€“ The Little Demon Hunter</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:system-ui,sans-serif;
  padding:20px;
  padding-bottom:160px; /* â˜… ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æˆ»ã‚Šé˜²æ­¢ */
  background:linear-gradient(180deg,#fff6fb,#f0fbff);
  max-width:620px;
  margin:auto;
}

h1{text-align:center;margin-bottom:6px;}
.sub{text-align:center;font-size:14px;color:#666;margin-bottom:20px;}

.story{
  background:white;
  padding:18px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
  font-size:18px;
  line-height:1.8;
}

.word{
  cursor:pointer;
  border-radius:6px;
}

.word:active{
  background:#ffe4f1;
}

/* ===== Dictionary ===== */
.card{
  margin-top:20px;
  background:#ffffff;
  padding:16px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
}

.label{font-size:13px;color:#666;margin-top:10px;}
.text,.hiragana{font-size:18px;margin-top:4px;}
.hiragana{cursor:pointer;}

input{
  width:100%;
  padding:10px;
  font-size:16px;
  border-radius:12px;
  border:1px solid #ccc;
  margin-top:6px;
}

.controls{
  text-align:center;
  margin-top:20px;
}

button,a{
  display:inline-block;
  margin:6px;
  padding:12px 18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  background:white;
  text-decoration:none;
  color:#333;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
}
</style>
</head>

<body>

<a href="index.html">â† Back to Menu</a>

<h1>ğŸ“– Story 1</h1>
<div class="sub">The Little Demon Hunter</div>

<div class="story" id="story">
Long ago, in a quiet village, there lived a small and kind child.
The village was peaceful, and people felt safe every day.
But deep inside the dark forest, something evil was waking up.
One night, the moon glowed bright red in the sky.
A tiny demon appeared near the village gate.
The demon was weak, but it frightened everyone.
The child felt scared, but did not run away.
With a brave heart and shaking hands, the child took one step forward.
That was the moment the long journey began.
</div>

<div class="controls">
  <button onclick="readAll()">ğŸ”Š Read All</button>
  <a href="story2.html">Next Story â†’</a>
</div>

<div class="card">
  <div class="label">ğŸ”¤ Word Checker</div>
  <input id="miniEng" placeholder="Tap a word or typeâ€¦" oninput="miniProcess()">

  <div class="label">Japanese</div>
  <div class="text" id="miniJP">â€”</div>

  <div class="label">Reading (Hiragana)</div>
  <div class="hiragana" id="miniHira" onclick="speakJP(miniHira.innerText)">â€”</div>

  <button onclick="speakEN()">ğŸ”Š English</button>
  <button onclick="speakJP(miniJP.innerText)">ğŸ”Š æ—¥æœ¬èª</button>
</div>

<script>
/* ===== Dictionary ===== */
const dict={
long:{jp:"é•·ã„",hira:"ãªãŒã„"},
ago:{jp:"ä»¥å‰",hira:"ã„ãœã‚“"},
quiet:{jp:"é™ã‹ãª",hira:"ã—ãšã‹ãª"},
village:{jp:"æ‘",hira:"ã‚€ã‚‰"},
small:{jp:"å°ã•ã„",hira:"ã¡ã„ã•ã„"},
kind:{jp:"å„ªã—ã„",hira:"ã‚„ã•ã—ã„"},
child:{jp:"å­ã©ã‚‚",hira:"ã“ã©ã‚‚"},
peaceful:{jp:"å¹³å’Œãª",hira:"ã¸ã„ã‚ãª"},
people:{jp:"äººã€…",hira:"ã²ã¨ã³ã¨"},
safe:{jp:"å®‰å…¨",hira:"ã‚ã‚“ãœã‚“"},
forest:{jp:"æ£®",hira:"ã‚‚ã‚Š"},
dark:{jp:"æš—ã„",hira:"ãã‚‰ã„"},
evil:{jp:"é‚ªæ‚ª",hira:"ã˜ã‚ƒã‚ã"},
moon:{jp:"æœˆ",hira:"ã¤ã"},
demon:{jp:"æ‚ªé­”",hira:"ã‚ãã¾"},
weak:{jp:"å¼±ã„",hira:"ã‚ˆã‚ã„"},
scared:{jp:"æ€–ãŒã£ã¦ã„ã‚‹",hira:"ã“ã‚ãŒã£ã¦ã„ã‚‹"},
brave:{jp:"å‹‡æ•¢",hira:"ã‚†ã†ã‹ã‚“"},
heart:{jp:"å¿ƒ",hira:"ã“ã“ã‚"},
journey:{jp:"æ—…",hira:"ãŸã³"}
};

/* ===== å˜èªã‚¿ãƒƒãƒ— ===== */
const storyEl=document.getElementById("story");
const originalText=storyEl.innerText;

storyEl.innerHTML=originalText.split(/(\s+)/).map(w=>{
  if(/\s+/.test(w)) return w;
  const clean=w.toLowerCase().replace(/[^a-z]/g,"");
  return `<span class="word" onclick="selectWord('${clean}')">${w}</span>`;
}).join("");

function selectWord(w){
  if(!w) return;
  miniEng.value=w;
  miniProcess();
  speakEN();
}

/* ===== Dictionary ===== */
function miniProcess(){
  const w=miniEng.value.toLowerCase().trim();
  if(dict[w]){
    miniJP.innerText=dict[w].jp;
    miniHira.innerText=dict[w].hira;
  }else{
    miniJP.innerText="â€”";
    miniHira.innerText="â€”";
  }
}

/* ===== Speech ===== */
function gentleEN(text){
  const u=new SpeechSynthesisUtterance(text);
  u.lang="en-US";
  u.rate=0.5;
  u.pitch=1.3;

  const voices=speechSynthesis.getVoices();
  const soft=voices.find(v=>v.lang.startsWith("en") && v.name.includes("Female"));
  if(soft) u.voice=soft;

  return u;
}

function speakEN(){
  if(!miniEng.value) return;
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(miniEng.value));
}

function speakJP(t){
  if(t==="â€”") return;
  const u=new SpeechSynthesisUtterance(t);
  u.lang="ja-JP";
  u.rate=0.5;
  u.pitch=1.2;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function readAll(){
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(originalText));
}
</script>

</body>
</html>
