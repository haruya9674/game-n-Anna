<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Story 2 â€“ The Forest of Whispers</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:system-ui,sans-serif;
  padding:20px;
  padding-bottom:160px;
  background:linear-gradient(180deg,#fff6fb,#f0fbff);
  max-width:620px;
  margin:auto;
}

h1{text-align:center;margin-bottom:6px;}
.sub{text-align:center;font-size:14px;color:#666;margin-bottom:20px;}

.story{
  background:white;
  padding:18px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
  font-size:18px;
  line-height:1.8;
}

.word{
  cursor:pointer;
  border-radius:6px;
}

.word:active{
  background:#ffe4f1;
}

/* ===== Dictionary ===== */
.card{
  margin-top:20px;
  background:#ffffff;
  padding:16px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
}

.label{font-size:13px;color:#666;margin-top:10px;}
.text,.hiragana{font-size:18px;margin-top:4px;}
.hiragana{cursor:pointer;}

input{
  width:100%;
  padding:10px;
  font-size:16px;
  border-radius:12px;
  border:1px solid #ccc;
  margin-top:6px;
}

.controls{
  text-align:center;
  margin-top:20px;
}

button,a{
  display:inline-block;
  margin:6px;
  padding:12px 18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  background:white;
  text-decoration:none;
  color:#333;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
}
</style>
</head>

<body>

<a href="index.html">â† Back to Menu</a>

<h1>ğŸ“– Story 2</h1>
<div class="sub">The Forest of Whispers</div>

<div class="story" id="story">
The next morning, the child walked toward the dark forest.
Tall trees stood quietly, blocking the sunlight.
The wind whispered soft voices between the leaves.
Every step made the child feel nervous and brave at the same time.
Suddenly, a small glowing stone shined on the ground.
When the child picked it up, the stone felt warm.
A gentle voice spoke inside the childâ€™s heart.
â€œThis forest is dangerous, but you are not alone.â€
Holding the glowing stone, the child took a deep breath.
The journey into the forest had truly begun.
</div>

<div class="controls">
  <button onclick="readAll()">ğŸ”Š Read All</button>
  <a href="english_demon_story.html">â† Previous Story</a>
  <a href="story3.html">Next Story â†’</a>
</div>

<div class="card">
  <div class="label">ğŸ”¤ Word Checker</div>
  <input id="miniEng" placeholder="Tap a word or typeâ€¦" oninput="miniProcess()">

  <div class="label">Japanese</div>
  <div class="text" id="miniJP">â€”</div>

  <div class="label">Reading (Hiragana)</div>
  <div class="hiragana" id="miniHira" onclick="speakJP(miniHira.innerText)">â€”</div>

  <button onclick="speakEN()">ğŸ”Š English</button>
  <button onclick="speakJP(miniJP.innerText)">ğŸ”Š æ—¥æœ¬èª</button>
</div>

<script>
/* ===== Dictionary (Story2 å®Œå…¨å¯¾å¿œ) ===== */
const dict={
next:{jp:"æ¬¡ã®",hira:"ã¤ãã®"},
morning:{jp:"æœ",hira:"ã‚ã•"},
child:{jp:"å­ã©ã‚‚",hira:"ã“ã©ã‚‚"},
walked:{jp:"æ­©ã„ãŸ",hira:"ã‚ã‚‹ã„ãŸ"},
toward:{jp:"ã€œã¸å‘ã‹ã£ã¦",hira:"ã‚€ã‹ã£ã¦"},
dark:{jp:"æš—ã„",hira:"ãã‚‰ã„"},
forest:{jp:"æ£®",hira:"ã‚‚ã‚Š"},
tall:{jp:"é«˜ã„",hira:"ãŸã‹ã„"},
trees:{jp:"æœ¨ã€…",hira:"ãã"},
quietly:{jp:"é™ã‹ã«",hira:"ã—ãšã‹ã«"},
blocking:{jp:"é®ã£ã¦ã„ã‚‹",hira:"ã•ãˆãã£ã¦ã„ã‚‹"},
sunlight:{jp:"æ—¥å…‰",hira:"ã«ã£ã“ã†"},
wind:{jp:"é¢¨",hira:"ã‹ãœ"},
whispered:{jp:"ã•ã•ã‚„ã„ãŸ",hira:"ã•ã•ã‚„ã„ãŸ"},
soft:{jp:"ã‚„ã•ã—ã„",hira:"ã‚„ã•ã—ã„"},
voices:{jp:"å£°",hira:"ã“ãˆ"},
leaves:{jp:"è‘‰",hira:"ã¯"},
every:{jp:"ã™ã¹ã¦ã®",hira:"ã™ã¹ã¦ã®"},
step:{jp:"ä¸€æ­©",hira:"ã„ã£ã½"},
nervous:{jp:"ç·Šå¼µã—ãŸ",hira:"ãã‚“ã¡ã‚‡ã†ã—ãŸ"},
brave:{jp:"å‹‡æ•¢ãª",hira:"ã‚†ã†ã‹ã‚“ãª"},
suddenly:{jp:"çªç„¶",hira:"ã¨ã¤ãœã‚“"},
small:{jp:"å°ã•ã„",hira:"ã¡ã„ã•ã„"},
glowing:{jp:"å…‰ã‚‹",hira:"ã²ã‹ã‚‹"},
stone:{jp:"çŸ³",hira:"ã„ã—"},
ground:{jp:"åœ°é¢",hira:"ã˜ã‚ã‚“"},
warm:{jp:"æ¸©ã‹ã„",hira:"ã‚ãŸãŸã‹ã„"},
gentle:{jp:"ã‚„ã•ã—ã„",hira:"ã‚„ã•ã—ã„"},
voice:{jp:"å£°",hira:"ã“ãˆ"},
inside:{jp:"ä¸­ã«",hira:"ãªã‹ã«"},
heart:{jp:"å¿ƒ",hira:"ã“ã“ã‚"},
dangerous:{jp:"å±é™ºãª",hira:"ãã‘ã‚“ãª"},
alone:{jp:"ã²ã¨ã‚Š",hira:"ã²ã¨ã‚Š"},
holding:{jp:"æŒã£ã¦ã„ã‚‹",hira:"ã‚‚ã£ã¦ã„ã‚‹"},
deep:{jp:"æ·±ã„",hira:"ãµã‹ã„"},
breath:{jp:"æ¯",hira:"ã„ã"},
journey:{jp:"æ—…",hira:"ãŸã³"},
truly:{jp:"æœ¬å½“ã«",hira:"ã»ã‚“ã¨ã†ã«"},
begun:{jp:"å§‹ã¾ã£ãŸ",hira:"ã¯ã˜ã¾ã£ãŸ"}
};

/* ===== å˜èªã‚¿ãƒƒãƒ—å‡¦ç† ===== */
const storyEl=document.getElementById("story");
const originalText=storyEl.innerText;

storyEl.innerHTML=originalText.split(/(\s+)/).map(w=>{
  if(/\s+/.test(w)) return w;
  const clean=w.toLowerCase().replace(/[^a-z]/g,"");
  return `<span class="word" onclick="selectWord('${clean}')">${w}</span>`;
}).join("");

function selectWord(w){
  if(!w) return;
  miniEng.value=w;
  miniProcess();
  speakEN();
}

/* ===== Dictionary ===== */
function miniProcess(){
  const w=miniEng.value.toLowerCase().trim();
  if(dict[w]){
    miniJP.innerText=dict[w].jp;
    miniHira.innerText=dict[w].hira;
  }else{
    miniJP.innerText="â€”";
    miniHira.innerText="â€”";
  }
}

/* ===== Speech ===== */
function gentleEN(text){
  const u=new SpeechSynthesisUtterance(text);
  u.lang="en-US";
  u.rate=0.5;
  u.pitch=1.3;

  const voices=speechSynthesis.getVoices();
  const soft=voices.find(v=>v.lang.startsWith("en") && v.name.includes("Female"));
  if(soft) u.voice=soft;
  return u;
}

function speakEN(){
  if(!miniEng.value) return;
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(miniEng.value));
}

function speakJP(t){
  if(t==="â€”") return;
  const u=new SpeechSynthesisUtterance(t);
  u.lang="ja-JP";
  u.rate=0.5;
  u.pitch=1.2;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function readAll(){
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(originalText));
}
</script>

</body>
</html>
